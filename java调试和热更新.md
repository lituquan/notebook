## 背景
开发、联调、测试阶段，需要密切关注数据的流转，应用的状态。常用的观察方式是看日志、看数据，但是有时候会很迷糊，程序流转到不确定的分支去了。这时候我们会去debug。

### 断点
首先要建立一个概念，程序是个状态机。状态表现在数据上，状态变化来自程序中代码允许。比如古人结绳子计数：
```mermaid
graph LR
A[初始化：绳子没有结，节点=0]-->|打上一个结|B[绳子有，节点=1]-->|每打一个节|C[绳子节点+1]
```
断点：在打某个结的时候停下来，此时状态量：绳子节点个数
前进：打一个结
后退：解开最近的一个结，注意是最近一个

### 条件断点
在ide工具里，可以设置条件断点。比如在绳子打第4个结的时候，停下。

### watcher: 临时打印日志、修改变量
可以在断点的时候，临时加日志打印状态量。甚至可以强制修改状态量，测试需要的样例。

## 热更新
debug过程中修改代码，怎么生效
已经在测试环境运行，怎么快速更新、测试

### idea
开发环境热更新，可以在denug模式下，执行ctrl+F9。
![Alt text](image-3.png)

### Jrebal
https://www.cnblogs.com/sansui6/p/17043448.html

### arthas
arthas 可以临时加日志
https://www.jianshu.com/p/544b78949469
https://zhuanlan.zhihu.com/p/429565721

## 服务联调
### 远程调试
java 提供了JMR,可以远程连接服务调试。不过有安全风险，测试环境可以用，生产不建议开启。

### nocalhost
代理模式
边车模式
替换模式

### 注册中心