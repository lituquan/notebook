## 背景
目前在搭建bi系统
### 第一代
业务微服务,mysql主库--从数据库--数据抽取--数据转换--展示

商业bi: 拖拽定义界面

### 第二代
业务微服务,mysql主库--从数据库--数据抽取--数据转换

数据查询服务--业务系统--前端展示

特点：数仓可以和业务系统结合，数仓复杂抽数、转换。业务端通过接口拉取数据

### 困难

运营加一个字段，需要做的工作：
数仓抽取、计算、存储、暴露数据

后端+前端：查询、接口返回、前段渲染

## 方案
方案：
业务想要一个数据，我们的系统能自动化吗

### 传统报表

阶段一：

数仓工程师：准备数据，拉取、计算、存储

运营：写sql拉取数据、在metabase建立展示控件

现有系统改造：
    返回给前端的除了数据，还有字段名、类型
    数据+echart

### 智能数仓+报表
阶段二：

业务方：chatgpt 我要一个统计xxx的数据报表，chatgpt根据表结构，计算、查询sql，建立展示格式。

（1）意图识别
    得到业务想要统计的东西
（2）查询计划
    假设数据都已经准备好，生成个sql查询即可。报表展示层也可以自动化
（3）数据计算、查询都自动化  


## 数仓

### 第一代
我司的数据目前体量不大，之前都是用mysql主从。数仓在丛库拉取数据，kettle拉取、计算，存储端也是mysql.

目前最大的是用户和销售直接的咨询记录，这块数据是文本+log类的，计算不合适再mysql，之前用双写策略往elasticSearch里面写了，暂时是elk查看。

### 第二代
由于越来越多的数据在数仓，旧的mysql数仓库不够用了。现在买的阿里云的pg数仓，4个节点，计算能力好了不少。

### 未来
后续需要把增量实时的能力做好，数仓需要接收mq类的数据，http、rpc协议不合适，不考虑。还有部分是计算结果反馈到业务侧，这个目前是定时拉取，后面看是否有机制丛数仓增量回流。

### 为啥没用hadoop
我们的体量没么大，hadoop很重，合适才是最好的。

